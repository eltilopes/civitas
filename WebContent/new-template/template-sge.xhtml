<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="icon"
		href="#{request.contextPath}/resources/img/favicon.png"
		type="image/png" />

	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/theme.css" media="screen" />
	<link rel="stylesheet" type="text/css" href="#{request.contextPath}/resources/css/primefaces.css" media="screen" />
	<link href="#{request.contextPath}/resources/css/template-bootstrap/bootstrap.css" rel="stylesheet" type="text/css" />
	<link href="#{request.contextPath}/resources/css/template-bootstrap/estrutura.css" rel="stylesheet" type="text/css" />
	<link href="#{request.contextPath}/resources/fonts/fonts.css" rel="stylesheet" type="text/css" />
	<link href="#{request.contextPath}/resources/css/fuelux.min.css" rel="stylesheet" type="text/css" />

	<script type="text/javascript" src="#{request.contextPath}/resources/js/template-bootstrap/bootstrap.js" />
	<script type="text/javascript" src="#{request.contextPath}/resources/js/jquery.mask.js" />
	<h:outputScript library="js" name="util.js" target="form" />

	<ui:insert name="pageScript">
	
	</ui:insert>

	<title><ui:insert name="tituloPagina">
			    Cívitas
			 </ui:insert></title>
</h:head>

<h:body>
	<div id="geral" class="container">

		<div id="topo" class="header">
			<h:panelGroup rendered="#{not loginCivitasBean.usuarioLogado}">
				<ui:include src="/pages/topo-login.xhtml" />
			</h:panelGroup>
			<h:panelGroup rendered="#{loginCivitasBean.usuarioLogado}">
				<ui:include src="/pages/topo.xhtml" />
			</h:panelGroup>
		</div>

		<div id="menu">
			<ui:include src="/pages/menu.xhtml" />
		</div>

		<ui:insert name="parametros">
			<ui:param name="bean" value="#{value}" />
		</ui:insert>

		<h:panelGroup id="painelGlobal">
			<h:panelGroup id="painelResources" >
				<ui:insert name="includeScript" />
			</h:panelGroup>
			<div id="conteudo">
				<h:panelGroup id="pesquisa" rendered="#{bean['viewing']}">
					<ui:insert name="camposPrint">
					</ui:insert>
				</h:panelGroup>

				<h:form id="formConsulta">
					<h:panelGroup id="pesquisa" rendered="#{bean['searching']}">
							<ui:insert name="camposFiltro">
							</ui:insert>

							<div>
								<ui:insert name="botoesFiltro">

									<p:commandButton styleClass="btn btn-primary" value="Consultar"
										ajax="false" onclick="carregando.show()"
										update=":painelGlobal" oncomplete="carregando.hide();"
										actionListener="#{bean['find']}" />

								</ui:insert>
							</div>

						<br />

						<ui:insert name="tituloPainel">
							<ui:param name="tituloPainel" value="Nenhum" />
						</ui:insert>
						<div class="result-filtro-container">
							<p:panel header="#{tituloPainel}">
							
								<f:facet name="actions">
									<div class="button-panel">
										<ui:insert name="botoesInsertFiltro">
											<p:commandButton value="Novo"
												actionListener="#{bean['prepareInsert']}"
												onclick="carregando.show();" styleClass="btn btn-primary"
												update=":painelGlobal" rendered="#{showInserir}" ajax="false" />
											<p:commandButton value="Excluir" styleClass="btn btn-primary"
												style="display:none;" onclick="showIf()" icon="remIcon"
												rendered="#{showRemove}" />
										</ui:insert>
									</div>
								</f:facet>
								
								<ui:insert name="resultFiltro" />
	
							</p:panel>
						</div>
					</h:panelGroup>
				</h:form>

				<h:form id="formCadastro">
					<h:panelGroup id="cadastro" rendered="#{bean['updating']}">
						
						<ui:insert name="camposInsert">
						</ui:insert>

						<div class="margemtop">
							<ui:insert name="botoesInsert">
								<p></p>
								<p:commandButton styleClass="btn btn-primary" value="Salvar"
									actionListener="#{bean['save']}"
									rendered="#{bean['inserting']}"
									oncomplete="carregando.hide(); mensagemAviso.show();"
									update=":painelGlobal" onclick="carregando.show();"
									ajax="false" />

								<p:commandButton styleClass="btn btn-primary" value="Atualizar"
									actionListener="#{bean['update']}"
									oncomplete="mensagemAviso.show();"
									rendered="#{bean['editing']}" update=":painelGlobal"
									ajax="false" />

								<p:commandButton styleClass="btn btn-primary" value="Voltar"
									actionListener="#{bean['cancel']}" immediate="true"
									update=":painelGlobal" ajax="false" />
								<p></p>
							</ui:insert>
						</div>
					</h:panelGroup>
				</h:form>
			</div>

			<h:form id="formPanel">

				<p:dialog id="carregando" showHeader="false" widgetVar="carregando"
					closable="false" fixedCenter="true" modal="true" height="45"
					width="150" resizable="false" showEffect="fade" hideEffect="fade">
					<div class="loader" style="margin-top: 5px"></div>
					<h:outputLabel style="margin-left:40px; margin-top:10px;"
						value="Aguarde..." />
				</p:dialog>
				
				<p:dialog fixedCenter="true" id="mensagemAvisoErros"
					appendToBody="false"
					draggable="false" resizable="false" header="Aviso"
					widgetVar="mensagemAvisoErros" showEffect="fade" hideEffect="fade"
					rendered="#{facesContext.validationFailed}"
					visible="#{not empty facesContext.maximumSeverity}"
					modal="true" >
					<h:panelGroup id="painelMensagensErro">
						<p>Por favor, verifique se os campos foram preenchidos
							corretamente.</p>

						<div style="vertical-align: bottom; text-align: center">
							<p:commandButton value=" OK " styleClass="btn btn-primary"
								onclick="mensagemAvisoErros.hide();" ajax="true" />

						</div>
					</h:panelGroup>
				</p:dialog>

				<p:dialog id="mensagemAviso" width="400" header="Aviso"
					widgetVar="mensagemAviso" fixedCenter="true" showEffect="fade"
					hideEffect="fade" rendered="#{!facesContext.validationFailed}"
					visible="#{not empty facesContext.maximumSeverity}" modal="true">

					<h:panelGroup id="painelMensagens">
						<span id="messages"> <h:messages layout="table"
								infoClass="info" warnClass="warning" errorClass="error"
								fatalClass="error">
								<f:facet name="infoMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:info.gif']}" />
								</f:facet>
								<f:facet name="warnMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
								<f:facet name="errorMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
								<f:facet name="fatalMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
							</h:messages>
						</span>
						<br clear="all" />
						<div style="vertical-align: bottom; text-align: center">
							<ui:insert name="btConfirmDialog">
								<p:commandButton value=" OK " styleClass="btn btn-primary" onclick="mensagemAviso.hide();" ajax="false" />
							</ui:insert>
						</div>
					</h:panelGroup>
				</p:dialog>
				<ui:insert name="modalInsert" />
			</h:form>
		</h:panelGroup>
		
		<h:panelGroup id="painelMensagemAvisoNonUpdate">
			<h:form id="formAviso">
				<p:dialog id="mensagemAvisoNonUpdate" width="400" header="Aviso"
						widgetVar="mensagemAvisoNonUpdate" fixedCenter="true" showEffect="fade"
						hideEffect="fade" rendered="#{!facesContext.validationFailed}"
						visible="#{not empty facesContext.maximumSeverity}" modal="true">
	
					<h:panelGroup id="painelMensagens">
						<span id="messages"> <h:messages layout="list"
								infoClass="alert alert-success" warnClass="alert alert-warning" errorClass="alert alert-danger"
								fatalClass="alert alert-danger">
								<f:facet name="infoMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:info.gif']}" />
								</f:facet>
								<f:facet name="warnMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
								<f:facet name="errorMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
								<f:facet name="fatalMarker">
									<h:graphicImage width="16" height="16"
										value="#{resource['img:warning.gif']}" />
								</f:facet>
							</h:messages>
						</span>
						<br clear="all" />
						<div style="vertical-align: bottom; text-align: center">
							<p:commandButton value=" OK " styleClass="btn btn-primary"
								onclick="mensagemAvisoNonUpdate.hide();" ajax="true" />
						</div>
					</h:panelGroup>
				</p:dialog>
			</h:form>
		</h:panelGroup>

		<h:form id="formExclusao">
			<p:confirmDialog
				message="Deseja excluir o(s) registro(s) selecionado(s)?"
				id="alertaExclu" header="Confirmação de Operação" severity="alert"
				widgetVar="panel" modal="true">
				<p:commandButton value="Sim" update=":painelGlobal" ajax="true"
					styleClass="btn btn-primary" actionListener="#{bean['deleteAll']}"
					onclick="panel.hide();carregando.show();"
					oncomplete="mensagemAviso.show();clearCheckbox();" />
				<p:commandButton value="Não" onclick="panel.hide();" ajax="true"
					type="button" styleClass="btn btn-primary" />
			</p:confirmDialog>
		</h:form>

		<ui:include src="/pages/rodape.xhtml" />

	</div>
</h:body>

</html>