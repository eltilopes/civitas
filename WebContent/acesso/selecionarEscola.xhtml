<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
      
    <f:metadata>
        <f:viewParam name="urlOrigin" value="#{escolaBean.urlOrigin}" />
    </f:metadata>
      
    <ui:composition template="/new-template/template-crud.xhtml">
    
    	<ui:define name="tituloPagina">
    		<h:outputText value="Seleção Escola :: SGE" />
    	</ui:define>
    	
    	 <ui:define name="botoesFiltro">
		</ui:define>
    
    	<ui:define name="parametros">
    	   <ui:param name="bean" value="#{selecionarEscolaBean}" />
    	</ui:define>
    	
    	<ui:define name="tituloFieldSetFiltro">
    		<h4> Selecione a Escola </h4>
		</ui:define>
	
		<ui:define name="tituloPainel">
			<ui:param name="tituloPainel" value="Seleção de Escola" />
		</ui:define>
	
		<ui:define name="camposFiltro">				
			<div class="row">
				<div class="col-md-3">
					<p:inputText value="#{bean.entitySearch.descricao}" size="20" placeholder="Pesquisar">
						<f:ajax event="keyup" render="tabelaEscolas" listener="#{bean.completeEscola(bean.entitySearch.descricao)}"/>
					</p:inputText>
				</div>
				<div class="col-md-3">
					<p:commandButton styleClass="btn btn-primary" value="Retornar ao seu Domínio de Origem"
						ajax="false" onclick="carregando.show()" update=":painelGlobal"
						actionListener="#{bean.unidadeTrabalhoOrigem()}" />
				</div>
			</div>
			<p>&nbsp;</p>
		</ui:define>
		
		<ui:define  name="resultFiltro">
				<p:dataTable styleClass="table table-responsive table-mobile"
   							 id="tabelaEscolas"
   							 widgetVar="tabelaModulos"
   							 rows="10"
   							 emptyMessage="Nenhuma Escola foi encontrada."
   						 	 value="#{bean.escolasAutoComplete}" 
       					 	 var="escola" 
       					 	 paginator="#{bean.escolasAutoComplete.size() > 0}"
       					 	 paginatorPosition="bottom"
       					 	 rowStyleClass="bgLinha1,bgLinha2" >
       					 	 
       						<p:column headerText="Descrição" style="text-align:left;" >
       							<h:commandLink action="#{bean.selecionarEscola()}"> 
       								<h:outputText value="DISTRITO #{escola.distrito.codigo} - #{escola.descricao}" rendered="#{escola.distrito != null}" />
       								<h:outputText value="#{escola.descricao}" rendered="#{escola.distrito == null}" />
       								<f:setPropertyActionListener target="#{bean.entity}" value="#{escola}" />
       								<f:setPropertyActionListener target="#{bean.urlOrigin}" value="#{escolaBean.urlOrigin}" />
       							</h:commandLink>
       						</p:column>
       						
				 	</p:dataTable>
		</ui:define>
		
	
		
    </ui:composition>
</html>